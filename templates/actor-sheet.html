<form class="{{cssClass}}" autocomplete="off">
   
    {{!-- Sheet Header --}}
    <header class="sheet-header">
        <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
        <div class="header-fields">
            <h1 class="charname">
              <input name="name" type="text" value="{{actor.name}}" placeholder="Name"/>
              <a class="inline-roll" data-flavor="{{actor.name}}" data-formula="2d6"><i class="fas fa-dice"></i></a>
            </h1>
            <div class="resource quater-width">
                <span>{{localize "INSANE.HP"}}</span>
                <input type="text" class="number-input" name="data.health.value" value="{{data.health.value}}" data-dtype="Number"/>
                <span> / </span>
                <input type="text" class="number-input" name="data.health.max" value="{{data.health.max}}" data-dtype="Number"/>
            </div>
            <div class="resource quater-width">
                <span>{{localize "INSANE.Sanity"}}</span>
                <input type="text" class="number-input" name="data.sanity.value" value="{{data.sanity.value}}" data-dtype="Number"/>
                <span> / </span>
                <input type="text" class="number-input" name="data.sanity.max" value="{{data.sanity.max}}" data-dtype="Number"/>
            </div>

            <div class="resource quater-width">
                <span>{{localize "INSANE.Curiosity"}}</span>
                <select name="data.talent.curiosity">
                    {{#select data.talent.curiosity}}
                    <option value="0">-</option>
                    <option value="1">{{localize "INSANE.A1"}}</option>
                    <option value="2">{{localize "INSANE.B1"}}</option>
                    <option value="3">{{localize "INSANE.C1"}}</option>
                    <option value="4">{{localize "INSANE.D1"}}</option>
                    <option value="5">{{localize "INSANE.E1"}}</option>
                    <option value="6">{{localize "INSANE.F1"}}</option>
                    {{/select}}
                </select>
            </div>

            <div class="resource quater-width">
                <span>{{localize "INSANE.Fear"}}</span>
                <input type="checkbox" class="number-input" name="data.talent.fear" {{#if data.talent.fear}} checked {{/if}}">
            </div>
        </div>
    </header>

    <div class="talent-table">
        <table>
            <colgroup>
                <col span="1" style="width: 5%;">
                <col span="1" style="width: 2%;">
                <col span="1" style="width: 10%;">
                <col span="1" style="width: 2%;">
                <col span="1" style="width: 10%;">
                <col span="1" style="width: 2%;">
                <col span="1" style="width: 10%;">
                <col span="1" style="width: 2%;">
                <col span="1" style="width: 10%;">
                <col span="1" style="width: 2%;">
                <col span="1" style="width: 10%;">
                <col span="1" style="width: 2%;">
                <col span="1" style="width: 10%;">
                <col span="1" style="width: 5%;">
            </colgroup>

            <tbody>
                <tr>
                    <th></th>
                    <td></td>
                    <th>{{localize "INSANE.A1"}}</th>
                    <td></td>
                    <th>{{localize "INSANE.B1"}}</th>
                    <td></td>
                    <th>{{localize "INSANE.C1"}}</th>
                    <td></td>
                    <th>{{localize "INSANE.D1"}}</th>
                    <td></td>
                    <th>{{localize "INSANE.E1"}}</th>
                    <td></td>
                    <th>{{localize "INSANE.F1"}}</th>
                    <th></th>
                </tr>
                {{#each data.tables}}  
                <tr>
                    <th>{{number}}</th>
                    <td {{#ifEquals ../data.talent.curiosity 1}} class="active" {{/ifEquals}}></td>
                    <td class="{{#if line.[0].state}} checked {{/if}} {{#if line.[0].fear}} feared {{/if}}" >
                        <input class="talent-checkbox" type="checkbox" name="{{line.[0].name}}.state" {{#if line.[0].state}} checked {{/if}} >
                        <input type="hidden" name="{{line.[0].name}}.num" value="{{line.[0].num}}">
                        <input type="hidden" name="{{line.[0].name}}.fear" value="{{line.[0].fear}}" data-dtype="Boolean">
                        <label class="talent-name" data-title="{{localize line.[0].title}}" data-num="{{line.[0].num}}" data-id="{{line.[0].id}}" data-fear="{{line.[0].fear}}">{{localize line.[0].title}}</label>
                    </td>

                    <td {{#ifOrEquals ../data.talent.curiosity 1 ../data.talent.curiosity 2}} class="active" {{/ifOrEquals}}></td>
                    <td  class="{{#if line.[1].state}} checked {{/if}} {{#if line.[1].fear}} feared {{/if}}" >
                        <input class="talent-checkbox" type="checkbox" name="{{line.[1].name}}.state" {{#if line.[1].state}} checked {{/if}} >
                        <input type="hidden" name="{{line.[1].name}}.num" value="{{line.[1].num}}">
                        <input type="hidden" name="{{line.[1].name}}.fear" value="{{line.[1].fear}}" data-dtype="Boolean">
                        <label class="talent-name" data-title="{{localize line.[1].title}}" data-num="{{line.[1].num}}" data-id="{{line.[1].id}}" data-fear="{{line.[1].fear}}">{{localize line.[1].title}}</label>
                    </td>

                    <td {{#ifOrEquals ../data.talent.curiosity 2 ../data.talent.curiosity 3}} class="active" {{/ifOrEquals}}></td>

                    <td class="{{#if line.[2].state}} checked {{/if}} {{#if line.[2].fear}} feared {{/if}}" >
                        <input class="talent-checkbox" type="checkbox" name="{{line.[2].name}}.state" {{#if line.[2].state}} checked {{/if}} >
                        <input type="hidden" name="{{line.[2].name}}.num" value="{{line.[2].num}}">
                        <input type="hidden" name="{{line.[2].name}}.fear" value="{{line.[2].fear}}" data-dtype="Boolean">
                        <label class="talent-name" data-title="{{localize line.[2].title}}" data-num="{{line.[2].num}}" data-id="{{line.[2].id}}" data-fear="{{line.[2].fear}}">{{localize line.[2].title}}</label>
                    </td>

                    <td {{#ifOrEquals ../data.talent.curiosity 3 ../data.talent.curiosity 4}} class="active" {{/ifOrEquals}}></td>

                    <td class="{{#if line.[3].state}} checked {{/if}} {{#if line.[3].fear}} feared {{/if}}" >
                        <input class="talent-checkbox" type="checkbox" name="{{line.[3].name}}.state" {{#if line.[3].state}} checked {{/if}} >
                        <input type="hidden" name="{{line.[3].name}}.num" value="{{line.[3].num}}">
                        <input type="hidden" name="{{line.[3].name}}.fear" value="{{line.[3].fear}}" data-dtype="Boolean">
                        <label class="talent-name" data-title="{{localize line.[3].title}}" data-num="{{line.[3].num}}" data-id="{{line.[3].id}}" data-fear="{{line.[3].fear}}">{{localize line.[3].title}}</label>
                    </td>

                    <td {{#ifOrEquals ../data.talent.curiosity 4 ../data.talent.curiosity 5}} class="active" {{/ifOrEquals}}></td>

                    <td class="{{#if line.[4].state}} checked {{/if}} {{#if line.[4].fear}} feared {{/if}}" >
                        <input class="talent-checkbox" type="checkbox" name="{{line.[4].name}}.state" {{#if line.[4].state}} checked {{/if}} >
                        <input type="hidden" name="{{line.[4].name}}.num" value="{{line.[4].num}}">
                        <input type="hidden" name="{{line.[4].name}}.fear" value="{{line.[4].fear}}" data-dtype="Boolean">
                        <label class="talent-name" data-title="{{localize line.[4].title}}" data-num="{{line.[4].num}}" data-id="{{line.[4].id}}" data-fear="{{line.[4].fear}}">{{localize line.[4].title}}</label>
                    </td>

                    <td {{#ifOrEquals ../data.talent.curiosity 5 ../data.talent.curiosity 6}} class="active" {{/ifOrEquals}}></td>

                    <td class="{{#if line.[5].state}} checked {{/if}} {{#if line.[5].fear}} feared {{/if}}" >
                        <input class="talent-checkbox" type="checkbox" name="{{line.[5].name}}.state" {{#if line.[5].state}} checked {{/if}} >
                        <input type="hidden" name="{{line.[5].name}}.num" value="{{line.[5].num}}">
                        <input type="hidden" name="{{line.[5].name}}.fear" value="{{line.[5].fear}}" data-dtype="Boolean">
                        <label class="talent-name" data-title="{{localize line.[5].title}}" data-num="{{line.[5].num}}" data-id="{{line.[5].id}}" data-fear="{{line.[5].fear}}">{{localize line.[5].title}}</label>
                    </td>
                    <th>{{number}}</th>
                </tr>
                {{/each}}
            </tbody>
        </table>

    </div>


    {{!-- Sheet Tab Navigation --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="description">{{localize "INSANE.Description"}}</a>
        <a class="item" data-tab="ability">{{localize "INSANE.Ability"}}</a>
        <a class="item" data-tab="bonds">{{localize "INSANE.Bonds"}}</a>
        <a class="item" data-tab="items">{{localize "INSANE.Items"}}</a>
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">

        {{!-- Biography Tab --}}
        <div class="tab biography" data-group="primary" data-tab="description">
            <h2>{{localize "INSANE.Basic"}}</h2>
            <table>
                <tr>
                    <th>{{localize "INSANE.Age"}}</th>
                    <td><input type="text" name="data.details.age" value="{{data.details.age}}"></td>
                    <th>{{localize "INSANE.Gender"}}</th>
                    <td><input type="text" name="data.details.sex" value="{{data.details.sex}}"></td>
                </tr>
                <tr>
                    <th>{{localize "INSANE.Job"}}</th>
                    <td><input type="text" name="data.details.job" value="{{data.details.job}}"></td>
                    <th>{{localize "INSANE.Exp"}}</th>
                    <td><input type="text" name="data.details.exp" value="{{data.details.exp}}"></td>
                </tr>

            </table>
            <h2>{{localize "INSANE.Memo"}}</h2>
            {{editor content=data.details.biography target="data.details.biography" button=true owner=owner editable=editable}}
        </div>

        {{!-- Owned Ability Tab --}}
        <div class="tab items" data-group="primary" data-tab="ability">
          <div class="cell cell--common-talent">
            <h2 class="cell--title">
              <label>{{localize "INSANE.AbilityList"}}</label>
              <div class="item-controls">
                <button type="button" class="item-control item-create" data-type="ability">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </h2>
            <ol class="items-list">
            {{#each actor.abilityList as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}" draggable="true">
                
                <h4 class="item-name">
                    <span class="echo-item" style="float:left;">
                        <img src="{{item.img}}" title="{{item.name}}" width="37" height="37" style="vertical-align : middle;margin-right:10px;">
                    </span> 
                    <span class="item-label">{{item.name}}<br>
                    <span style="color : gray; font-size : smaller;">
                        <b>{{localize "INSANE.Type"}}</b> : {{item.data.type}} /
                        <b>{{localize "INSANE.Talent"}}</b> : {{item.data.talent}}
                        
                    <span class="item-details-toggle"><i class="fas fa-chevron-down"></i></span>
                    </span></span>
                </h4>
                
                
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
                <div class="item-description">
                  <p>{{{item.data.description}}}</p>
                </div>
              </li>
            {{/each}}
            </ol>
          </div>
        </div>

        {{!-- Owned Bonds Tab --}}
        <div class="tab items" data-group="primary" data-tab="bonds">
          <div class="cell cell--common-talent">
            <h2 class="cell--title">
              <label>{{localize "INSANE.BondsList"}}</label>
              <div class="item-controls">
                <button type="button" class="item-control item-create" data-type="bond">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </h2>
            <ol class="items-list">
            {{#each actor.bondList as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}" draggable="true">
                
                <h4 class="item-name">
                    <span class="echo-item" style="float:left;">
                        <img src="{{item.img}}" title="{{item.name}}" width="37" height="37" style="vertical-align : middle;margin-right:10px;">
                    </span> 
                    <span class="item-label">{{item.name}}<br>
                    <span style="color : gray; font-size : smaller;">
                        <b>{{localize "INSANE.Residence"}}</b> : {{#if item.data.residence}} O {{else}} X {{/if}} /
                        <b>{{localize "INSANE.Secret"}}</b> : {{#if item.data.secret}} O {{else}} X {{/if}} /
                        <b>{{localize "INSANE.Feeling"}}</b> : {{item.data.feeling}}
                        
                    <span class="item-details-toggle"><i class="fas fa-chevron-down"></i></span>
                    </span></span>
                </h4>

                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
                <div class="item-description">
                        <p>{{{item.data.description}}}</p>
                </div>
              </li>
            {{/each}}
            </ol>
          </div>
        </div>

        {{!-- Owned Items Tab --}}
        <div class="tab items" data-group="primary" data-tab="items">
          <div class="cell cell--common-talent">
            <h2 class="cell--title">
              <label>{{localize "INSANE.ItemsList"}}</label>
              <div class="item-controls">
                <button type="button" class="item-control item-create" data-type="item" >
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </h2>
            <ol class="items-list">
            {{#each actor.itemList as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}" draggable="true">
                
                <h4 class="item-name">
                    <span class="echo-item" style="float:left;">
                        <img src="{{item.img}}" title="{{item.name}}" width="25" height="25" style="vertical-align : middle;margin-right:10px;">
                    </span> 
                    <span class="item-label">{{item.name}} X {{item.data.quantity}}
                        
                    <span class="item-details-toggle"><i class="fas fa-chevron-down"></i></span></span>
                </h4>
                
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
                <div class="item-description">
                  <p>{{{item.data.description}}}</p>
                  <button type="button" class="use-item">{{localize "INSANE.UseItem"}}</button>
                </div>
              </li>
            {{/each}}
            </ol>
          </div>
        </div>

    </section>
</form>

